import React, {Suspense} from 'react';
import Link from 'next/link';
// import { usePathname, useSearchParams } from 'next/navigation';
import { Base } from 'templates/base';
//import ShopSection from "ui/shop-section";
import SubMenuContainer from "ui/sub-menu-container";
import BannerName from "ui/banner-name";
 import MenuCard from "ui/menu-card";
 import ItemCard from "ui/card2";
import DebitCard from "ui/debit-card";
import useHome from "./useHome";
import CartItem from "ui/cart-item";
import { Skeleton} from 'components/Skeleton';

export default function Page() {
  // const pathname = usePathname();//const keyword = "";//match.params.keyword;
  // const searchParams = useSearchParams();//const pagenumber = 1;//match.params.pagenumber;
  // console.log("pathname:"+pathname);
  // console.log("searchParams:"+searchParams);  
  const { userInfo , MenuItems, isMainData, cart, total, setData } = useHome(); 
  return (
     <Base>
     <div className="mainContainer">
          {/* Banner  */}
          <div className="banner">
          <Suspense fallback={<Skeleton/>}>
             <BannerName name={userInfo ? (`${userInfo.name}`) : ("Chefinho")} discount={"20"} more={"#"} />
             </Suspense>
             <img
              src="/images/1.png"
              alt=""
              className="deliveryPic"
            />
          </div>

          <div className="dishContainer">
            <div className="menuCard">
            <Suspense fallback={<Skeleton/>}>
               <SubMenuContainer title="iPhones" subtitle="Saiba Mais" linkHref="/login" />
            </Suspense>
            </div>

            <div className="rowContainer">
                  <div>
                  <Suspense fallback={<Skeleton/>}>
                  {MenuItems &&
                  MenuItems.map((data:any) => (
                  <div key={data.id} onClick={() => setData(data.itemId)}>
                    <MenuCard
                      imgSrc={data.imgSrc}
                      name={data.name}
                      isActive={data.id == "1" ? true : false}
                    />
                  </div>
                ))}
                </Suspense>
                  </div>
            </div>
           
            <div className="dishItemContainer">
             {/* <ShopSection/> */}
             <Suspense fallback={<Skeleton/>}>
             {isMainData &&
                isMainData.map((data) => (
                  <ItemCard
                    key={data.id}
                    itemId={data.id}
                    imgSrc={data.imgSrc}
                    name={data.name}
                    ratings={data.ratings}
                    price={data.price}
                  />
                ))}
                </Suspense>
            </div>
          </div>
        </div>
        <div className="rightMenu">
          <div className="debitCardContainer">
            <div className="debitCard">
               <DebitCard />
            </div>
          </div>

          
             <div className="addSomeItem">
              <img
                src="/images/14.png"
                alt=""
                className="emptyCart"
              />
              </div>
          
            <div className="cartCheckOutContianer">
              <div className="cartContainer">
                {/* <SubMenuContainer /> */}

                <div className="cartItems">
                <Suspense fallback={<Skeleton/>}>
                    {cart &&
                    cart.map((data:any) => (
                      <CartItem
                        key={data.id}
                        itemId={data.id}
                        name={data.name}
                        imgSrc={data.imgSrc}
                        price={data.price}
                      />
                    ))}
                    </Suspense>
                </div>
              </div>
              <div className="totalSection">
                <h3>Total</h3>
                <p>
                  <span>$ </span> {total}
                </p>
              </div>
              <Link href="" className="checkOut">Check Out</Link>
            </div>          
        </div>
     </Base>   
  )
}
